<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-contributors/integration-testing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Integration Testing | Tailcall</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tailcall.run/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tailcall.run/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tailcall.run/docs/contributors/integration-testing/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Integration Testing | Tailcall"><meta data-rh="true" name="description" content="Discover Tailcall&#x27;s innovative markdown-based snapshot testing framework, designed to enhance testing across various programming languages seamlessly. This framework focuses on simplicity and maintainability, utilizing Markdown to make test cases easy to write and understand. Tailored for users of Tailcall, the framework supports extensive testing of GraphQL backends without language constraints. Features include detailed instructions on running and filtering tests, a structured test syntax guide, and comprehensive sections on test processes and snapshot maintenance. Ideal for developers seeking a straightforward, language-agnostic testing solution. Learn more about implementing and maintaining effective tests with Tailcall&#x27;s unique approach."><meta data-rh="true" property="og:description" content="Discover Tailcall&#x27;s innovative markdown-based snapshot testing framework, designed to enhance testing across various programming languages seamlessly. This framework focuses on simplicity and maintainability, utilizing Markdown to make test cases easy to write and understand. Tailored for users of Tailcall, the framework supports extensive testing of GraphQL backends without language constraints. Features include detailed instructions on running and filtering tests, a structured test syntax guide, and comprehensive sections on test processes and snapshot maintenance. Ideal for developers seeking a straightforward, language-agnostic testing solution. Learn more about implementing and maintaining effective tests with Tailcall&#x27;s unique approach."><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://tailcall.run/docs/contributors/integration-testing/"><link data-rh="true" rel="alternate" href="https://tailcall.run/docs/contributors/integration-testing/" hreflang="en"><link data-rh="true" rel="alternate" href="https://tailcall.run/docs/contributors/integration-testing/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JEP3QDWT0G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JEP3QDWT0G",{})</script>




<script async="true" src="https://tag.clearbitscripts.com/v1/pk_498a76355e253f5c7f4e7c7bed78748e/tags.js" referrerpolicy="strict-origin-when-cross-origin"></script>
<link rel="preconnect" href="https://codesandbox.io"><link rel="stylesheet" href="/assets/css/styles.b565f490.css">
<script src="/assets/js/runtime~main.c01bba1c.js" defer="defer"></script>
<script src="/assets/js/main.a9e559c3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/icons/companies/taicall.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="2.5rem"><img src="/icons/companies/taicall.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="2.5rem"></div></a><a class="navbar__item navbar__link" href="/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.tailcall.run/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/kRZBPpkgwq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-button header-button-discord">      
              <svg width="28" height="22" viewBox="0 0 28 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23.2405 2.2332C21.5408 1.42782 19.7182 0.834436 17.8125 0.494586C17.7779 0.488038 17.7432 0.504423 17.7253 0.53721C17.4909 0.967757 17.2312 1.52944 17.0494 1.97092C14.9998 1.65402 12.9607 1.65402 10.953 1.97092C10.7712 1.51963 10.5021 0.967757 10.2666 0.53721C10.2488 0.505525 10.2141 0.489124 10.1794 0.494586C8.2748 0.83335 6.45219 1.42673 4.75149 2.2332C4.73677 2.23977 4.72414 2.25071 4.71577 2.26489C1.25866 7.59877 0.311625 12.8016 0.776218 17.9398C0.778307 17.9649 0.791981 17.9889 0.810899 18.0042C3.0918 19.7341 5.30124 20.7843 7.46966 21.4804C7.50435 21.4913 7.54112 21.4781 7.56321 21.4486C8.07614 20.7252 8.53339 19.9626 8.92543 19.1604C8.94856 19.1134 8.92648 19.0577 8.8792 19.0391C8.15394 18.755 7.46334 18.4086 6.79905 18.0152C6.7465 17.9836 6.74229 17.9058 6.79063 17.8687C6.93043 17.7605 7.07025 17.648 7.20374 17.5344C7.22789 17.5135 7.26154 17.5093 7.28994 17.5223C11.6542 19.5801 16.3789 19.5801 20.6915 17.5223C20.7199 17.508 20.7536 17.5125 20.7788 17.5333C20.9122 17.647 21.0521 17.7605 21.193 17.8687C21.2413 17.9058 21.2382 17.9836 21.1856 18.0152C20.5213 18.4162 19.8306 18.755 19.1044 19.038C19.0571 19.0565 19.0361 19.1134 19.0592 19.1604C19.4596 19.9613 19.9168 20.7242 20.4204 21.4475C20.4414 21.4781 20.4792 21.4913 20.5139 21.4804C22.6928 20.7843 24.9023 19.7341 27.1832 18.0042C27.2032 17.9889 27.2158 17.966 27.2179 17.9409C27.7739 12.0005 26.2866 6.84038 23.2752 2.26598C23.2678 2.25071 23.2552 2.23977 23.2405 2.2332ZM9.57715 14.8112C8.26323 14.8112 7.1806 13.5653 7.1806 12.0355C7.1806 10.5056 8.24223 9.25986 9.57715 9.25986C10.9225 9.25986 11.9948 10.5164 11.9737 12.0355C11.9737 13.5653 10.912 14.8112 9.57715 14.8112ZM18.438 14.8112C17.1241 14.8112 16.0414 13.5653 16.0414 12.0355C16.0414 10.5056 17.103 9.25986 18.438 9.25986C19.7833 9.25986 20.8555 10.5164 20.8345 12.0355C20.8345 13.5653 19.7833 14.8112 18.438 14.8112Z" fill="#121315"/>
              </svg></a><a href="https://github.com/tailcallhq/tailcall" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-button header-button-github"><div class="hidden lg:block button-grid-bg-section-dark h-full w-40 scale-90 opacity-0 hover:scale-[1] hover:opacity-100 transform transition-all ease-out duration-250 active:hidden"></div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.967 1C5.903 1 1 6.042 1 12.279c0 4.986 3.141 9.206 7.5 10.7.544.112.743-.243.743-.542 0-.261-.017-1.157-.017-2.091C6.175 21.018 5.539 19 5.539 19c-.49-1.307-1.216-1.643-1.216-1.643-.999-.69.072-.69.072-.69 1.108.074 1.69 1.157 1.69 1.157.98 1.718 2.56 1.232 3.195.934.09-.729.381-1.233.69-1.513-2.433-.261-4.993-1.232-4.993-5.565 0-1.232.435-2.24 1.125-3.025-.109-.28-.49-1.438.11-2.988 0 0 .925-.298 3.013 1.158a10.342 10.342 0 0 1 2.742-.373c.926 0 1.87.13 2.742.373 2.088-1.456 3.014-1.158 3.014-1.158.6 1.55.218 2.708.109 2.988.708.784 1.126 1.793 1.126 3.025 0 4.333-2.56 5.285-5.012 5.565.4.355.745 1.027.745 2.091 0 1.513-.018 2.727-.018 3.1 0 .299.2.654.744.542 4.358-1.494 7.5-5.714 7.5-10.7C22.933 6.042 18.013 1 11.966 1Z" fill="#121315"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(1 1)" d="M0 0h22v22H0z"></path></clipPath></defs></svg><span>Star <span class="min-w-[3ch] inline-block"></span></span></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><div class="sidebar-search-container flex flex-col"><div class="inputContainer_h8Qr"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input readonly="" placeholder="Search" class="input_yPvf"></div><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/icons/companies/taicall.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="2.5rem"><img src="/icons/companies/taicall.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="2.5rem"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/configuration/">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/launch/">Launch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/execute/">Execute</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/cli/">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/client-tuning/">Client Tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/configuration/">Configuration Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/context/">Context Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/conventions/">Naming Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/environment-variables/">Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/execution-strategy/">Sequencing &amp; Parallelism</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/grpc/">GraphQL on gRPC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/http-cache/">Http Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/http-filters/">HTTP Filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/http2/">HTTP/2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/logging/">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/n+1/">N+1 Problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/playground/">Playground</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/rest/">REST on top of GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/scalar/">Scalars</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tailcall-on-aws/">Tailcall on AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/watch-mode/">Watch Mode</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Telemetry</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/telemetry/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/telemetry/data-dog/">Data Dog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/telemetry/new-relic/">New Relic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/telemetry/honey-comb/">Honeycomb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/telemetry/apollo-studio/">Apollo Studio</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Auth</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/basic-auth/">Basic Auth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/jwt/">JWT</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Directives</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/add-field/">@addField</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/cache/">@cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/call/">@call</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/expr/">@expr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/graphql/">@graphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/grpc/">@grpc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/http/">@http</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/link/">@link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/modify/">@modify</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/omit/">@omit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/protected/">@protected</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/rest/">@rest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/server/">@server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/telemetry/">@telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directives/upstream/">@upstream</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Contributors</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/">Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/mutability/">Mutability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/testing/">Unit Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/contributors/integration-testing/">Integration Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/telemetry/">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/benchmark/">Benchmarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/bounty/">Bounty</a></li></ul></li></ul></nav></div></div></aside></div><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributors</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Integration Testing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integration Testing</h1></header><p>We created a special DSL atop markdown syntax and leveraging snapshot testing to allow developers a unified experience while writing integration tests. Markdown syntax allowed us to embed multiple file formats — JSON, GraphQL, JS etc. and make them work in tandem.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-it-work">How does it work?<a href="#how-does-it-work" class="hash-link" aria-label="Direct link to How does it work?" title="Direct link to How does it work?">​</a></h2>
<p><a href="https://github.com/tailcallhq/tailcall/blob/main/tests/execution_spec.rs" target="_blank" rel="noopener noreferrer">execution_spec</a> implements a Markdown-based snapshot testing framework for Tailcall. The framework is designed to test the execution of Tailcall configs, and it is based on the following architecture:
<img decoding="async" loading="lazy" alt="Test Architecture" src="/assets/images/test-arch-6d6afe033eb68830ab8b180b23c466ac.png" width="1920" height="1080" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="run-tests">Run tests<a href="#run-tests" class="hash-link" aria-label="Direct link to Run tests" title="Direct link to Run tests">​</a></h2>
<p>The markdown-based tests are executed as usual integration test so you can use test options and filters like with usual test.</p>
<p>To run markdown-based tests skipping other tests run following command:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cargo test --test execution_spec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After running you will get an output of all executed markdown tests.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="filter-tests">Filter tests<a href="#filter-tests" class="hash-link" aria-label="Direct link to Filter tests" title="Direct link to Filter tests">​</a></h3>
<p>If you want to run specific set of tests you have two options.</p>
<p>First, if you want to filter out tests when you run it locally then you can use <a href="/docs/contributors/testing/#filter-running-tests">testing filters</a>. For example, to filter grpc related tests:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># to run grpc tests</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cargo test --test execution_spec grpc</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># or to skip grpc tests</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cargo test --test execution_spec -- --skip grpc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Second, if you want to disable some tests permanently due to one of the following reasons:</p>
<ul>
<li>Some functionalities which are supposed to be tested might not be implemented yet</li>
<li>There might be some bugs related to it.</li>
</ul>
<p>In that case you can a special annotation <code>##### skip</code> that should be placed inside the test md file. For example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token title important punctuation" style="color:hsl(119, 34%, 47%);font-weight:bold">#</span><span class="token title important" style="color:hsl(230, 8%, 24%);font-weight:bold"> Failing test</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token title important punctuation" style="color:hsl(119, 34%, 47%);font-weight:bold">#####</span><span class="token title important" style="color:hsl(230, 8%, 24%);font-weight:bold"> skip</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">&lt;!-- Some test content --&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This test won&#x27;t be executed until the annotation is removed.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="structure">Structure<a href="#structure" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h2>
<p>All <code>execution_spec</code> tests are located in <code>tests/execution/</code>. The results generated by these tests are stored as snapshots in <code>tests/snapshots/</code>.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-syntax">Test syntax<a href="#test-syntax" class="hash-link" aria-label="Direct link to Test syntax" title="Direct link to Test syntax">​</a></h2>
<p>An <code>execution_spec</code> test is always a Markdown file with a <code>.md</code> extension. These files contain the following parts:</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="header">Header<a href="#header" class="hash-link" aria-label="Direct link to Header" title="Direct link to Header">​</a></h3>
<p>A level 1 heading (<code>#</code>) specifying the name of the test, and an optional paragraph after it specifying a description. There must be precisely one header in a test.</p>
<p>Examples:</p>
<ul>
<li>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token title important punctuation" style="color:hsl(119, 34%, 47%);font-weight:bold">#</span><span class="token title important" style="color:hsl(230, 8%, 24%);font-weight:bold"> Simple test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token title important punctuation" style="color:hsl(119, 34%, 47%);font-weight:bold">#</span><span class="token title important" style="color:hsl(230, 8%, 24%);font-weight:bold"> Complex test</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">This is a description.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="blocks">Blocks<a href="#blocks" class="hash-link" aria-label="Direct link to Blocks" title="Direct link to Blocks">​</a></h3>
<p>Blocks are specified along with the codeblocks next to the format of the codeblock (<code>@</code>) followed by the block type, and a code block after them. Blocks supply the runner with data, and the runner determines what to do based on the available blocks. example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">graphql @server</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-graphql">schema {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  query: Query</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="server"><code>@server</code><a href="#server" class="hash-link" aria-label="Direct link to server" title="Direct link to server">​</a></h4>
<p>A <code>@server</code> block lets you specify a server SDL config. These are expected to be parseable to have a passing test, unless the <a href="#instruction"><code>SDL error</code> instruction</a> is specified, which requires the config parsing to throw an error. There must be at least one <code>@server</code> block in a test.</p>
<p>Every test should have at least one <code>@server</code> block. Some blocks (for example, <code>@test</code>) require precisely one <code>@server</code> block. Moreover, having precisely one <code>@server</code> block in a test ensures that the <code>client</code> check will also be performed.</p>
<p>The <code>merge</code> check is always performed using every defined server block.</p>
<p>When the <a href="#instruction"><code>check identity</code> instruction</a> is specified, the runner will attempt to perform an <code>identity</code> check, but since is a &quot;dumb&quot;, plain-text check, it requires the <code>server</code> block&#x27;s code to be written in a specific way.</p>
<p>Example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">graphql @server</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-graphql">schema {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  query: Query</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">type User {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  id: Int</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  name: String</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">type Query {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  user: User</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    @http(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">      path: &quot;/users/1&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">      baseURL: &quot;http://jsonplaceholder.typicode.com&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    )</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mock"><code>@mock</code><a href="#mock" class="hash-link" aria-label="Direct link to mock" title="Direct link to mock">​</a></h4>
<p>A <code>@mock</code> block specifies mocked HTTP endpoints in <code>YAML</code>.</p>
<p>An item of <code>mock</code> contains a <code>request</code> and a <code>response</code>.</p>
<p>There may be at most one <code>mock</code> block in a test.</p>
<p>Example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">graphql @mock</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-graphql">- request:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    method: GET</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    url: http://jsonplaceholder.typicode.com/users/1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  response:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    status: 200</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    body:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">      id: 1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">      name: foo</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="env"><code>@env</code><a href="#env" class="hash-link" aria-label="Direct link to env" title="Direct link to env">​</a></h4>
<p>An <code>@env</code> block specifies environment variables in <code>YAML</code> that the runner should use in the app context.</p>
<p>There may be at most one <code>@env</code> block in a test.</p>
<p>Example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">yml @env</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-yml">TEST_ID: 1</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test"><code>@test</code><a href="#test" class="hash-link" aria-label="Direct link to test" title="Direct link to test">​</a></h4>
<p>An <code>@test</code> block specifies HTTP requests that the runner should perform in <code>YAML</code>.
It solely contains requests. The response for each request is stored in an <code>test_{i}</code> snapshot.</p>
<p>There may be at most one <code>@test</code> block in a test.</p>
<p>Example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">graphql @test</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-graphql">- method: POST</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  url: http://localhost:8080/graphql</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  body:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    query: query { user { name } }</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="filefilename"><code>@file:&lt;filename&gt;</code><a href="#filefilename" class="hash-link" aria-label="Direct link to filefilename" title="Direct link to filefilename">​</a></h4>
<p>A <code>@file</code> block creates a file in the spec&#x27;s virtual file system. The <a href="#server"><code>@server</code> block</a> will have exclusive access to files created in this way: the true filesystem is not available to it.</p>
<p>Every <code>@file</code> block has the filename declared in the header. The language of the code block is optional and does not matter.</p>
<p>Example:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><span class="token code code-language">graphql @file:enum.graphql</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code code-block language-graphql">schema</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  @server(port: 8080)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  @upstream(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">    baseURL: &quot;http://jsonplaceholder.typicode.com&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  ) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  query: Query</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">enum Foo {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  BAR</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  BAZ</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">type Query {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">  foo: Foo @http(path: &quot;/foo&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code code-block language-graphql">}</span><span class="token code"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token code"></span><span class="token code punctuation" style="color:hsl(119, 34%, 47%)">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="instruction">Instruction<a href="#instruction" class="hash-link" aria-label="Direct link to Instruction" title="Direct link to Instruction">​</a></h3>
<p>A header (<code>---</code>), followed by an instruction:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block punctuation" style="color:hsl(119, 34%, 47%)">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:hsl(35, 99%, 36%)">expect_validation_error</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:hsl(230, 8%, 24%);font-weight:bold">true</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:hsl(119, 34%, 47%)">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>This instructs the runner to expect a failure when parsing the <code>server</code> block and to compare the result with an <code>errors</code> snapshot. This is used when testing for error handling.</li>
</ul>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block punctuation" style="color:hsl(119, 34%, 47%)">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:hsl(35, 99%, 36%)">check_identity</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:hsl(230, 8%, 24%);font-weight:bold">true</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:hsl(119, 34%, 47%)">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>This instructs the runner to run identity checks on <code>server</code> blocks. While it would be good to run this on every test, the code of <code>server</code> blocks must be written with this instruction mind, therefore it is optional.</li>
</ul>
<p>There must be precisely zero or one instruction in a test.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-process">Test process<a href="#test-process" class="hash-link" aria-label="Direct link to Test process" title="Direct link to Test process">​</a></h2>
<ol>
<li>The runner reads all tests, and selects the ones to run based on the following:<!-- -->
<ul>
<li>If a path to a test was given in the first command line argument, solely that test will run.</li>
<li>If one or more tests have a <a href="#annotation"><code>skip</code> annotation</a>, every test except those will run.</li>
<li>If none of the above is true, all tests will run.</li>
</ul>
</li>
<li>The runner evaluates every test.<!-- -->
<ol>
<li>If the test has an <a href="#instruction"><code>SDL error</code> instruction</a>, the runner does the following:<!-- -->
<ol>
<li>Reads and parses the config, taking note of the validation errors.</li>
<li><strong>If no validation errors occurred, the runner throws an error.</strong> (<code>SDL error</code> is a requirement, not a try-catch.)</li>
<li>Compares the encountered errors to the <code>errors</code> snapshot.</li>
<li>If the snapshot doesn&#x27;t match the encountered errors, the runner generates a new snapshot and throws an error.</li>
<li>Ends the test run, and starts evaluating the next test. (All other actions would require a parseable <code>@server</code> block.)</li>
<li>The runner parses every <code>@server</code> block.</li>
</ol>
</li>
<li>Parses the block and checks for errors.</li>
<li>If the test has a <a href="#instruction"><code>check identity</code> instruction</a>, the runner converts the parsed block to SDL again, and checks if the two strings are the same. If they&#x27;re not, the runner throws an error.</li>
<li>The runner performs a <code>merge</code> check:<!-- -->
<ol>
<li>Attempts to merge all <a href="#server"><code>@server</code> blocks</a>, resulting in a merged config. (If there is a single <a href="#server"><code>@server</code> block</a>, the runner will merge it with the default config.)</li>
<li>Compares the merged config to the <code>merged</code> snapshot.</li>
<li>If the snapshot doesn&#x27;t match the merged config, the runner generates a new snapshot and throws an error.</li>
</ol>
</li>
<li>If there is precisely one <a href="#server"><code>@server</code> block</a>, the runner performs a <code>client</code> check:<!-- -->
<ol>
<li>Generates the client schema of the <code>server</code> block.</li>
<li>Compares it to the <code>client</code> SDL snapshot.</li>
<li>If the snapshot doesn&#x27;t match the generated schema, the runner generates a new snapshot and throws an error.</li>
</ol>
</li>
<li>If the test has an <a href="#test"><code>@test</code> block</a>, the runner performs <code>test</code> checks:<!-- -->
<ol>
<li>If there is a <a href="#mock"><code>@mock</code> block</a>, the runner sets up the mock HTTP client based on it.</li>
<li>If there is at least one <a href="#filefilename"><code>@file</code> block</a>, the runner sets up the mock filesystem based on them.</li>
<li>If there is an <a href="#env"><code>@env</code> block</a>, the runner uses it for the app context.</li>
<li>Creates an app context based on the <a href="#server"><code>@server</code> block</a>.</li>
<li>For each test in the block (0-based index <code>i</code>), the runner does the following:<!-- -->
<ol>
<li>Runs the HTTP request on the app context.</li>
<li>Compares the HTTP response to the <code>test_{i}</code> snapshot.</li>
<li>If the snapshot doesn&#x27;t match the response, the runner generates a new snapshot and throws an error.</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="snapshots">Snapshots<a href="#snapshots" class="hash-link" aria-label="Direct link to Snapshots" title="Direct link to Snapshots">​</a></h2>
<p><code>execution_spec</code> uses the <a href="https://insta.rs" target="_blank" rel="noopener noreferrer">Insta</a> snapshot engine. Snapshots are automatically generated with a <code>.new</code> suffix if there is no pre-existing snapshot, or if the compared data didn&#x27;t match the existing snapshot.</p>
<p>Instead of writing result cases in tests and updating them when behaviour changes, a snapshot-based testing workflow relies on auto-generation. Whenever a <code>.new</code> snapshot is generated, it means one of the following:</p>
<ul>
<li>Your code made an unexpected breaking change, and you need to fix it.</li>
<li>Your code made an expected breaking change, and you need to accept the new snapshot.</li>
</ul>
<p>You need to determine which one is the case, and take action accordingly.</p>
<p>Usage of <a href="https://insta.rs/docs/cli/" target="_blank" rel="noopener noreferrer">cargo-insta</a> is recommended:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cargo insta test --review</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will regenerate all snapshots without interrupting the test every time there&#x27;s a diff, and it will also open the snapshot review interface, so that you can accept or reject <code>.new</code> snapshots.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="maintenance">Maintenance<a href="#maintenance" class="hash-link" aria-label="Direct link to Maintenance" title="Direct link to Maintenance">​</a></h2>
<ol>
<li>To clean unused snapshots, run <code>cargo insta test --delete-unreferenced-snapshots</code>.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/tailcallhq/tailcallhq.github.io/tree/develop/docs/contributors/integration-testing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/contributors/testing/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unit Testing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/contributors/telemetry/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Telemetry</div></a></nav><hr><br></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How does it work?</a></li><li><a href="#run-tests" class="table-of-contents__link toc-highlight">Run tests</a><ul><li><a href="#filter-tests" class="table-of-contents__link toc-highlight">Filter tests</a></li></ul></li><li><a href="#structure" class="table-of-contents__link toc-highlight">Structure</a></li><li><a href="#test-syntax" class="table-of-contents__link toc-highlight">Test syntax</a><ul><li><a href="#header" class="table-of-contents__link toc-highlight">Header</a></li><li><a href="#blocks" class="table-of-contents__link toc-highlight">Blocks</a></li><li><a href="#instruction" class="table-of-contents__link toc-highlight">Instruction</a></li></ul></li><li><a href="#test-process" class="table-of-contents__link toc-highlight">Test process</a></li><li><a href="#snapshots" class="table-of-contents__link toc-highlight">Snapshots</a></li><li><a href="#maintenance" class="table-of-contents__link toc-highlight">Maintenance</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>