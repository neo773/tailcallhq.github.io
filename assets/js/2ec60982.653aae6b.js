"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4203],{4831:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var i=n(5893),r=n(1151);const s={title:"JWT",description:"Learn how you can provide granular access to types and fields in GraphQL schema with the help of authentication providers"},a=void 0,o={id:"auth/jwt",title:"JWT",description:"Learn how you can provide granular access to types and fields in GraphQL schema with the help of authentication providers",source:"@site/docs/auth/jwt.md",sourceDirName:"auth",slug:"/auth/jwt",permalink:"/docs/auth/jwt",draft:!1,unlisted:!1,editUrl:"https://github.com/tailcallhq/tailcallhq.github.io/tree/develop/docs/auth/jwt.md",tags:[],version:"current",frontMatter:{title:"JWT",description:"Learn how you can provide granular access to types and fields in GraphQL schema with the help of authentication providers"},sidebar:"tutorialSidebar",previous:{title:"Basic Auth",permalink:"/docs/auth/basic-auth"},next:{title:"Introduction",permalink:"/docs/directives"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Tailcall config",id:"tailcall-config",level:2},{value:"Making test request",id:"making-test-request",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"JWT Authentication"})," uses digitally signed tokens to authenticate and transmit user information in a compact JSON format, allowing stateless and secure communication between clients and servers. It offers greater flexibility and security, supporting expiration times and custom data embedding within the token itself."]}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(t.p,{children:["To be able to use JWT authentication you should have configured ",(0,i.jsx)(t.a,{href:"https://supertokens.com/blog/understanding-jwks",children:(0,i.jsx)(t.code,{children:"JSON Web Key Sets"})})," (JWKS for short) file."]}),"\n",(0,i.jsxs)(t.p,{children:["To create this file you can use available web-tools like ",(0,i.jsx)(t.a,{href:"https://russelldavies.github.io/jwk-creator/",children:"JWK creator"})," in case you already have RSA key-pair or ",(0,i.jsx)(t.a,{href:"https://mkjwk.org",children:"mkjwk"})," if you don't."]}),"\n",(0,i.jsx)(t.h2,{id:"tailcall-config",children:"Tailcall config"}),"\n",(0,i.jsxs)(t.p,{children:["To use JWT you should first include JWKS file generated from ",(0,i.jsx)(t.a,{href:"#prerequisites",children:"Prerequisites"})," with the help of ",(0,i.jsxs)(t.a,{href:"/docs/directives/link#jwks",children:[(0,i.jsx)(t.code,{children:"@link"})," directive"]}),"."]}),"\n",(0,i.jsx)(t.p,{children:"We can use that file as an example for it:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:'title="jwks.json"',children:'{\n  "keys": [\n    {\n      "kty": "RSA",\n      "use": "sig",\n      "alg": "RS256",\n      "kid": "I48qMJp566SSKQogYXYtHBo9q6ZcEKHixNPeNoxV1c8",\n      "n": "ksMb5oMlhJ_HzAebCuBG6-v5Qc4J111ur7Aux6-8SbxzqFONsf2Bw6ATG8pAfNeZ-USA3_T1mGkYTDvfoggXnxsduWV_lePZKKOq_Qp_EDdzic1bVTJQDad3CXldR3wV6UFDtMx6cCLXxPZM5n76e7ybPt0iNgwoGpJE28emMZJXrnEUFzxwFMq61UlzWEumYqW3uOUVp7r5XAF5jQ_1nQAnpHBnRFzdNPVb3E6odMGu3jgp8mkPbPMP16Fund4LVplLz8yrsE9TdVrSdYJThylRWn_BwvJ0DjUcp8ibJya86iClUlixAmBwR9NdStHwQqHwmMXMKkTXo-ytRmSUobzxX9T8ESkij6iBhQpmDMD3FbkK30Y7pUVEBBOyDfNcWOhholjOj9CRrxu9to5rc2wvufe24VlbKb9wngS_uGfK4AYvVyrcjdYMFkdqw-Mft14HwzdO2BTS0TeMDZuLmYhj_bu5_g2Zu6PH5OpIXF6Fi8_679pCG8wWAcFQrFrM0eA70wD_SqD_BXn6pWRpFXlcRy_7PWTZ3QmC7ycQFR6Wc6Px44y1xDUoq3rH0RlZkeicfvP6FRlpjFU7xF6LjAfd9ciYBZfJll6PE7zf-i_ZXEslv-tJ5-30-I4Slwj0tDrZ2Z54OgAg07AIwAiI5o4y-0vmuhUscNpfZsGAGhE",\n      "e": "AQAB"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["After adding ",(0,i.jsx)(t.code,{children:"@link"})," you can use the ",(0,i.jsxs)(t.a,{href:"/docs/directives/protected",children:[(0,i.jsx)(t.code,{children:"@protected"})," directive"]})," to mark the fields that requiring success authentication to be requested."]}),"\n",(0,i.jsx)(t.p,{children:"The whole example could look like this:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:'schema\n  @server(port: 8000, graphiql: true)\n  @upstream(baseURL: "http://jsonplaceholder.typicode.com")\n  @link(id: "auth-jwks", type: Jwks, src: "jwks.json") {\n  query: Query\n}\n\ntype Query {\n  user(id: Int!): User @http(path: "/users/{{.args.id}}")\n}\n\ntype User @protected {\n  id: Int!\n  name: String!\n  username: String!\n  email: String!\n  phone: String\n  website: String\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"making-test-request",children:"Making test request"}),"\n",(0,i.jsx)(t.p,{children:"Now you can run the example file with Tailcall and try to make a query for data with specifying credentials."}),"\n",(0,i.jsxs)(t.p,{children:["To make the request first obtain JWT token compatible with JWKS file you've linked before (if you've used the example ",(0,i.jsx)(t.code,{children:"jwks.json"})," file from above then you can use the token from the example below)."]}),"\n",(0,i.jsx)(t.p,{children:"An request example with curl:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"curl --request POST \\\n  --url http://localhost:8000/graphql \\\n  --header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6Ikk0OHFNSnA1NjZTU0tRb2dZWFl0SEJvOXE2WmNFS0hpeE5QZU5veFYxYzgifQ.eyJleHAiOjIwMTkwNTY0NDEuMCwiaXNzIjoibWUiLCJzdWIiOiJ5b3UiLCJhdWQiOlsidGhlbSJdfQ.cU-hJgVGWxK3-IBggYBChhf3FzibBKjuDLtq2urJ99FVXIGZls0VMXjyNW7yHhLLuif_9t2N5UIUIq-hwXVv7rrGRPCGrlqKU0jsUH251Spy7_ppG5_B2LsG3cBJcwkD4AVz8qjT3AaE_vYZ4WnH-CQ-F5Vm7wiYZgbdyU8xgKoH85KAxaCdJJlYOi8mApE9_zcdmTNJrTNd9sp7PX3lXSUu9AWlrZkyO-HhVbXFunVtfduDuTeVXxP8iw1wt6171CFbPmQJU_b3xCornzyFKmhSc36yvlDfoPPclWmWeyOfFEp9lVhQm0WhfDK7GiuRtaOxD-tOvpTjpcoZBeJb7bSg2OsneyeM_33a0WoPmjHw8WIxbroJz_PrfE72_TzbcTSDttKAv_e75PE48Vvx0661miFv4Gq8RBzMl2G3pQMEVCOm83v7BpodfN_YVJcqZJjVHMA70TZQ4K3L4_i9sIK9jJFfwEDVM7nsDnUu96n4vKs1fVvAuieCIPAJrfNOUMy7TwLvhnhUARsKnzmtNNrJuDhhBx-X93AHcG3micXgnqkFdKn6-ZUZ63I2KEdmjwKmLTRrv4n4eZKrRN-OrHPI4gLxJUhmyPAHzZrikMVBcDYfALqyki5SeKkwd4v0JAm87QzR4YwMdKErr0Xa5JrZqHGe2TZgVO4hIc-KrPw' \\\n  --data '{\"query\":\"query {\\n\\tuser(id: 1) { name }\\n}\"}'\n"})}),"\n",(0,i.jsx)(t.p,{children:"Executing such request should be resolved with the user and its name."})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>a});var i=n(7294);const r={},s=i.createContext(r);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);