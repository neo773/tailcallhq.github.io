"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1625],{5990:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var l=t(4848),i=t(8453);const s={title:"Deploy Tailcall GraphQL on Fly",sidebar_label:"Deploy on Fly",description:"Learn how to deploy Tailcall GraphQL servers on Fly.io with GitHub Actions quickly and securely.",slug:"deploy-tailcall-graphql-fly-actions"},o=void 0,a={id:"tailcall-on-fly",title:"Deploy Tailcall GraphQL on Fly",description:"Learn how to deploy Tailcall GraphQL servers on Fly.io with GitHub Actions quickly and securely.",source:"@site/docs/tailcall-on-fly.md",sourceDirName:".",slug:"/deploy-tailcall-graphql-fly-actions",permalink:"/docs/deploy-tailcall-graphql-fly-actions",draft:!1,unlisted:!1,editUrl:"https://github.com/tailcallhq/tailcallhq.github.io/tree/develop/docs/tailcall-on-fly.md",tags:[],version:"current",frontMatter:{title:"Deploy Tailcall GraphQL on Fly",sidebar_label:"Deploy on Fly",description:"Learn how to deploy Tailcall GraphQL servers on Fly.io with GitHub Actions quickly and securely.",slug:"deploy-tailcall-graphql-fly-actions"},sidebar:"docs",previous:{title:"Deployments",permalink:"/docs/deploy-graphql-github-actions"},next:{title:"Tailcall on AWS Lambda",permalink:"/docs/tailcall-on-aws"}},r={},c=[{value:"Generate API Key for Fly",id:"generate-api-key-for-fly",level:2},{value:"Setting up the project repository",id:"setting-up-the-project-repository",level:2},{value:"Deploy on Fly",id:"deploy-on-fly",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["Before deploying ",(0,l.jsx)(n.code,{children:"tailcall"})," on fly, you need to generate an API Key from Fly.io. If you don't have an account on Fly.io, you can create one ",(0,l.jsx)(n.a,{href:"https://fly.io/app/sign-up",children:"here"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"generate-api-key-for-fly",children:"Generate API Key for Fly"}),"\n",(0,l.jsx)(n.p,{children:"Follow the steps below to generate an API Key:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Go to ",(0,l.jsx)(n.a,{href:"https://fly.io/dashboard",children:"Fly.io dashboard"}),"."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"dashboard.png",src:t(6368).A+"",width:"1508",height:"925"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click on ",(0,l.jsx)(n.code,{children:"Tokens"})," in the left sidebar."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"tokens.png",src:t(6508).A+"",width:"1512",height:"925"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Here, you can optionally provide a name and the expiry for the token. Click on ",(0,l.jsx)(n.code,{children:"Create Organization Token"})," to generate the token."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"token.png",src:t(5079).A+"",width:"1510",height:"924"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Copy the generated token and store it securely. You need to provide this token as input to the ",(0,l.jsx)(n.code,{children:"tailcallhq/gh-action"})," action, when deploying to Fly."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"setting-up-the-project-repository",children:"Setting up the project repository"}),"\n",(0,l.jsxs)(n.p,{children:["Now you need to create a new repository on Github and use the Github action ",(0,l.jsx)(n.code,{children:"tailcallhq/gh-action"})," to deploy it. The easiest way to get started is to create a new repository using this template repo ",(0,l.jsx)(n.a,{href:"https://github.com/tailcallhq/deploy-tailcall",children:"https://github.com/tailcallhq/deploy-tailcall"}),"."]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Go to the repo and click on ",(0,l.jsx)(n.code,{children:"Use this template"})," and create a new repository."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"github-template.png",src:t(6384).A+"",width:"1512",height:"924"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Give your repository a name and click on ",(0,l.jsx)(n.code,{children:"Create repository"}),"."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"create-repo.png",src:t(6509).A+"",width:"1512",height:"924"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Now that you have created a repository, you will need to add the Fly API token to the repository secrets. To do that, click on ",(0,l.jsx)(n.code,{children:"Settings"}),"."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"settings.png",src:t(7565).A+"",width:"1512",height:"927"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click on ",(0,l.jsx)(n.code,{children:"Secrets and variables"})," in the left side bar to expand the section and click on ",(0,l.jsx)(n.code,{children:"Actions"}),"."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"actions.png",src:t(2197).A+"",width:"1512",height:"925"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click on ",(0,l.jsx)(n.code,{children:"New repository secret"})," to add a new secret."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"new-repo-secret.png",src:t(7920).A+"",width:"1512",height:"927"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Add the secret name as ",(0,l.jsx)(n.code,{children:"FLY_API_TOKEN"})," or any name you prefer and paste the Fly API token that you generated earlier in the value field. Click on ",(0,l.jsx)(n.code,{children:"Add secret"})," to save the secret."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"secret.png",src:t(4590).A+"",width:"1512",height:"927"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["You are now ready to deploy your ",(0,l.jsx)(n.code,{children:"tailcall"})," server on Fly."]}),"\n",(0,l.jsx)(n.h2,{id:"deploy-on-fly",children:"Deploy on Fly"}),"\n",(0,l.jsxs)(n.p,{children:["In this example, we will deploy a simple ",(0,l.jsx)(n.code,{children:"graphQL"})," server using ",(0,l.jsx)(n.code,{children:"tailcall"}),", on Fly, which will convert the JSONPlaceholder REST API to a GraphQL API."]}),"\n",(0,l.jsxs)(n.p,{children:["Below is the config present in the template repo, that will be used for this deployment. You can learn more about this ",(0,l.jsx)(n.a,{href:"https://tailcall.run/docs/getting_started/configuration/",children:"here"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-graphql",children:'schema\n  @upstream(\n    baseURL: "http://jsonplaceholder.typicode.com"\n  ) {\n  query: Query\n}\n\ntype Query {\n  posts: [Post] @http(path: "/posts")\n}\n\ntype User {\n  id: Int!\n  name: String!\n  username: String!\n  email: String!\n  phone: String\n  website: String\n}\n\ntype Post {\n  id: Int!\n  userId: Int!\n  title: String!\n  body: String!\n  user: User @http(path: "/users/{{.value.userId}}")\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["To deploy the server, just update the ",(0,l.jsx)(n.code,{children:"provider"})," to ",(0,l.jsx)(n.code,{children:"fly"})," in the ",(0,l.jsx)(n.code,{children:"deploy-tailcall"})," job in the ",(0,l.jsx)(n.code,{children:".github/workflows/main.yml"})," file, similar to the example below."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'on: [push]\n\njobs:\n  deploy_tailcall:\n    runs-on: ubuntu-latest\n    name: Deploy Tailcall\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Deploy Tailcall\n        id: deploy-tailcall\n        uses: tailcallhq/gh-action@<version> # Replace <version> with the desired version\n        with:\n          provider: "fly" # Specifies the cloud provider as \'fly\'\n          fly-api-token: ${{ secrets.FLY_API_TOKEN }}\n          fly-app-name: <app-name> # Replace <app-name> with the desired app name\n          fly-region: "lax"\n          tailcall-config: "./config.graphql"\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"important",children:(0,l.jsxs)(n.p,{children:["When specifying the fly-app-name in your GitHub Actions workflow for deploying to Fly.io, please ensure that the app name you choose is unique across all Fly.io users. Fly.io requires each app name to be globally unique. If the name you select is already taken by another user, your deployment will fail. To avoid this issue, consider using a name that includes unique identifiers such as your organization name, project name, etc. If you do not specify the app name then ",(0,l.jsx)(n.code,{children:"<orgname>-<reponame>"})," will be used."]})}),"\n",(0,l.jsxs)(n.p,{children:["After updating the ",(0,l.jsx)(n.code,{children:"main.yml"})," file, commit the changes and push them to the repository. This will trigger the deployment of the ",(0,l.jsx)(n.code,{children:"tailcall"})," server on Fly. Once deployment is successful, you can access the GraphQL playground at ",(0,l.jsx)(n.code,{children:"https://tailcall.run/playground/?u=https://<fly-app-name>.fly.dev/graphql"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},2197:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/actions-5aa5e47264821cfaf923d99caec8f556.png"},6509:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/create-repo-3809fc429b8affa306eca1632154a296.png"},6368:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/dashboard-8f35845e602d92b224ca261a8fbf329b.png"},6384:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/github-template-e87619685764c3e49a685001fed19a44.png"},7920:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/new-repo-secret-6bb8c55d803d9b31eae1345c6c939a25.png"},4590:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/secret-c4b448a1b91581d51b5d712b40f67e53.png"},7565:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/settings-5808e753509bd28a87ed7d78df9b8437.png"},5079:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/token-80ce77e615292c89df3b4da5cb5e0290.png"},6508:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/tokens-b612ede260fe6a36fe69b3ff35aba78c.png"}}]);